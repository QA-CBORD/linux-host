{"version":3,"sources":["webpack:///./src/app/sections/ordering/ordering.module.ts","webpack:///./src/app/sections/ordering/ordering.routing.module.ts","webpack:///./src/app/sections/ordering/resolvers/index.ts","webpack:///./src/app/sections/ordering/resolvers/ordering.resolver.ts","webpack:///./src/app/sections/ordering/shared/ui-components/delivery-addresses.modal/index.ts","webpack:///./src/app/sections/ordering/shared/ui-components/order-options.action-sheet/index.ts","webpack:///./src/app/sections/ordering/shared/ui-components/order-options.action-sheet/order-options.action-sheet.module.ts","webpack:///./src/app/sections/ordering/shared/ui-components/st-date-time-picker/index.ts","webpack:///./src/app/shared/pipes/merchant-distance/merchant-distance.module.ts","webpack:///./src/app/shared/pipes/merchant-distance/merchant-distance.pipe.ts"],"names":[],"mappings":"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","file":"ordering-ordering-module.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { OrderingRoutingModule } from './ordering.routing.module';\r\n\r\nimport { OrderingPage } from './ordering.page';\r\n\r\nimport { MerchantService } from './services';\r\nimport { OrderingApiService } from './services/ordering.api.service';\r\n\r\nimport { OrderingResolver } from './resolvers';\r\nimport { MerchantListModule } from './components/merchant-list/merchant-list.module';\r\nimport { MenuOrderingComponent } from './components';\r\nimport { OrderDetailsModule } from './shared/ui-components/order-details/order-details.module';\r\nimport { CartService } from '@sections/ordering/services/cart.service';\r\nimport { CartResolver } from '@sections/ordering/resolvers/cart.resolver';\r\nimport { OrderingService } from '@sections/ordering/services/ordering.service';\r\nimport { StHeaderModule } from '@shared/ui-components/st-header/st-header.module';\r\n\r\nconst imports = [CommonModule, OrderingRoutingModule, MerchantListModule, IonicModule, OrderDetailsModule, StHeaderModule];\r\nconst declarations = [OrderingPage, MenuOrderingComponent];\r\nconst providers = [OrderingResolver, MerchantService, OrderingApiService, CartService, CartResolver, OrderingService];\r\n\r\n@NgModule({\r\n  declarations,\r\n  imports,\r\n  providers,\r\n})\r\nexport class OrderingPageModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Route, RouterModule } from '@angular/router';\r\n\r\nimport { OrderingPage } from './ordering.page';\r\n\r\nimport { OrderingResolver } from './resolvers';\r\nimport { LOCAL_ROUTING } from './ordering.config';\r\nimport { RecentOrdersResolver } from '@sections/ordering/resolvers/recent-orders.resolver';\r\n\r\nconst routes: Route[] = [\r\n  {\r\n    path: '',\r\n    component: OrderingPage,\r\n    resolve: {\r\n      data: OrderingResolver,\r\n    },\r\n  },\r\n  {\r\n    path: LOCAL_ROUTING.recentOrders,\r\n    loadChildren: './pages/recent-orders/recent-orders.module#RecentOrdersModule',\r\n  },\r\n  {\r\n    path: LOCAL_ROUTING.savedAddresses,\r\n    loadChildren: './pages/saved-addresses/saved-addresses.module#SavedAddressesModule',\r\n  },\r\n  {\r\n    path: LOCAL_ROUTING.favoriteMerchants,\r\n    loadChildren: './pages/favorite-merchants/favorite-merchants.module#FavoriteMerchantsModule',\r\n  },\r\n  {\r\n    path: LOCAL_ROUTING.fullMenu,\r\n    loadChildren: './pages/full-menu/full-menu.module#FullMenuModule',\r\n  },\r\n  {\r\n    path: LOCAL_ROUTING.cart,\r\n    loadChildren: './pages/cart/cart.module#CartModule',\r\n  },\r\n  {\r\n    path: `${LOCAL_ROUTING.menuCategoryItems}/:id`,\r\n    loadChildren: './pages/menu-category-items/menu-category-items.module#MenuCategoryItemsModule',\r\n  },\r\n  {\r\n    path: `${LOCAL_ROUTING.itemDetail}`,\r\n    loadChildren: './pages/item-detail/item-detail.module#ItemDetailModule',\r\n  },\r\n  {\r\n    path: LOCAL_ROUTING.addressEdit,\r\n    loadChildren: './pages/address-edit/address-edit.module#AddressEditPageModule',\r\n  },\r\n];\r\n\r\nconst imports = [RouterModule.forChild(routes)];\r\nconst exports = [RouterModule];\r\n\r\n@NgModule({ imports, exports, providers: [RecentOrdersResolver] })\r\nexport class OrderingRoutingModule { }\r\n","export * from './ordering.resolver';\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { Observable, zip } from 'rxjs';\r\nimport { finalize, tap } from 'rxjs/operators';\r\nimport { MerchantInfo } from '@sections/ordering/shared/models';\r\n\r\nimport { LoadingService } from 'src/app/core/service/loading/loading.service';\r\nimport { MerchantService } from '../services';\r\nimport { ContentStringsFacadeService } from '@core/facades/content-strings/content-strings.facade.service';\r\nimport { CONTENT_STINGS_CATEGORIES, CONTENT_STINGS_DOMAINS } from '../../../content-strings';\r\nimport { ContentStringInfo } from '@core/model/content/content-string-info.model';\r\nimport { ORDER_VALIDATION_ERRORS, ORDERING_CONTENT_STRINGS } from '@sections/ordering/ordering.config';\r\n\r\n@Injectable()\r\nexport class OrderingResolver implements Resolve<Observable<[\r\n  ContentStringInfo[],\r\n  ContentStringInfo[],\r\n  ContentStringInfo[],\r\n  ContentStringInfo[],\r\n  MerchantInfo[]]>> {\r\n\r\n  constructor(\r\n    private readonly merchantService: MerchantService,\r\n    private readonly loadingService: LoadingService,\r\n    private readonly contentStringsFacadeService: ContentStringsFacadeService) {\r\n  }\r\n\r\n  resolve(): Observable<[ContentStringInfo[], ContentStringInfo[], ContentStringInfo[], ContentStringInfo[], MerchantInfo[]]> {\r\n    const orderingContentStrings = this.updateOrderValidationErrorObject();\r\n    const favouriteMerchant = this.merchantService.getMerchantsWithFavoriteInfo();\r\n    const statesStrings =\r\n      this.contentStringsFacadeService.fetchContentStrings$(\r\n        CONTENT_STINGS_DOMAINS.patronUi,\r\n        CONTENT_STINGS_CATEGORIES.usStates);\r\n    const weekDaysShortForm =\r\n      this.contentStringsFacadeService.fetchContentStrings$(\r\n        CONTENT_STINGS_DOMAINS.patronUi,\r\n        CONTENT_STINGS_CATEGORIES.dayOfWeekAbbreviated);\r\n    const dayMonthShortForm =\r\n      this.contentStringsFacadeService.fetchContentStrings$(\r\n        CONTENT_STINGS_DOMAINS.patronUi,\r\n        CONTENT_STINGS_CATEGORIES.monthAbbreviated);\r\n\r\n    this.loadingService.showSpinner();\r\n    return zip(dayMonthShortForm, weekDaysShortForm,orderingContentStrings, statesStrings, favouriteMerchant).pipe(\r\n      tap(() => this.loadingService.closeSpinner(), () => this.loadingService.closeSpinner()),\r\n    );\r\n  }\r\n\r\n  private updateOrderValidationErrorObject(): Observable<ContentStringInfo[]> {\r\n    const updatingConfigs = [\r\n      { key: 9017, value: ORDERING_CONTENT_STRINGS.errorMessageTimeSlotCapacityReached },\r\n      { key: 6112, value: ORDERING_CONTENT_STRINGS.errorMessageInsufficientFunds },\r\n    ];\r\n    return this.contentStringsFacadeService.fetchContentStrings$(\r\n      CONTENT_STINGS_DOMAINS.patronUi,\r\n      CONTENT_STINGS_CATEGORIES.ordering,\r\n    ).pipe(\r\n      tap(strings =>\r\n        strings && this.updateOrderValidationErrors(updatingConfigs, strings, ORDER_VALIDATION_ERRORS),\r\n      ));\r\n  }\r\n\r\n  private updateOrderValidationErrors(\r\n    instructions: UpdateConfig[],\r\n    configs: ContentStringInfo[],\r\n    sourceObject: typeof ORDER_VALIDATION_ERRORS) {\r\n    for (let i = 0; i < instructions.length; i++) {\r\n      const config = configs.find(({ name }) => name === instructions[i].value);\r\n      config && config.value && (sourceObject[instructions[i].key] = config.value);\r\n    }\r\n  }\r\n}\r\n\r\ninterface UpdateConfig {\r\n  key: keyof typeof ORDER_VALIDATION_ERRORS;\r\n  value: ORDERING_CONTENT_STRINGS;\r\n}\r\n","export * from './delivery-addresses.modal.module';\r\n","export * from './order-options.action-sheet.module';\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { OrderOptionsActionSheetComponent } from './order-options.action-sheet.component';\r\nimport { StDateTimePickerModule } from '../st-date-time-picker';\r\nimport { DeliveryAddressesModalModule } from '../delivery-addresses.modal';\r\nimport { StButtonModule } from '@shared/ui-components/st-button/st-button.module';\r\nimport { AddressHeaderFormatPipeModule } from '@shared/pipes/address-header-format-pipe/address-header-format-pipe.module';\r\n\r\nconst declarations = [OrderOptionsActionSheetComponent];\r\n\r\n@NgModule({\r\n  declarations,\r\n  exports: [OrderOptionsActionSheetComponent],\r\n  entryComponents: [OrderOptionsActionSheetComponent],\r\n  imports: [CommonModule, IonicModule, DeliveryAddressesModalModule, StDateTimePickerModule, StButtonModule, AddressHeaderFormatPipeModule],\r\n})\r\nexport class OrderOptionsActionSheetModule { }\r\n","export * from './st-date-time-picker.module';\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MerchantDistancePipe } from '@shared/pipes/merchant-distance/merchant-distance.pipe';\r\n\r\nconst declarations = [MerchantDistancePipe];\r\n\r\n@NgModule({\r\n  declarations,\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: [\r\n    declarations,\r\n    MerchantDistancePipe,\r\n  ],\r\n})\r\nexport class MerchantDistanceModule { }\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { OrderingService } from '@sections/ordering/services/ordering.service';\r\nimport { ORDERING_CONTENT_STRINGS } from '@sections/ordering/ordering.config';\r\nimport { first } from 'rxjs/operators';\r\n\r\n@Pipe({\r\n  name: 'merchantDistance',\r\n  pure: false,\r\n})\r\nexport class MerchantDistancePipe implements PipeTransform {\r\n  transform(value: number): string {\r\n    return !value ? '' : `${value.toFixed(2)} mi`;\r\n  }\r\n}\r\n"],"sourceRoot":""}