{"version":3,"sources":["webpack:///./node_modules/@ionic/core/dist/esm-es5/cubic-bezier-2812fda3.js","webpack:///./node_modules/@ionic/core/dist/esm-es5/haptic-c8f1473e.js","webpack:///./node_modules/@ionic/core/dist/esm-es5/index-3476b023.js","webpack:///./node_modules/@ionic/core/dist/esm-es5/theme-18cbe2cc.js","webpack:///./node_modules/@ionic/core/dist/esm-es5/watch-options-2af96011.js","webpack:///./src/app/core/model/add-funds/applepay-response.model.ts","webpack:///./src/app/core/service/external-payment/external-payment.service.ts","webpack:///./src/app/sections/accounts/services/deposit.service.ts","webpack:///./src/app/sections/accounts/shared/pipes/credit-card-type/credit-card-type.module.ts","webpack:///./src/app/sections/explore/explore.config.ts","webpack:///./src/app/sections/explore/services/explore.service.ts","webpack:///./src/app/sections/ordering/components/merchant-list/merchant-list.module.ts","webpack:///./src/app/sections/ordering/resolvers/cart.resolver.ts","webpack:///./src/app/sections/ordering/resolvers/recent-orders.resolver.ts","webpack:///./src/app/sections/ordering/shared/pipes/order-type/order-type.module.ts","webpack:///./src/app/sections/ordering/shared/pipes/order-type/order-type.pipe.ts","webpack:///./src/app/sections/ordering/shared/ui-components/confirm-popover/confirm-popover.module.ts","webpack:///./src/app/shared/ui-components/st-spinner/st-spinner.module.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,+BAA+B,EAAE;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACoD;;;;;;;;;;;;;AC5FpD;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACiH;;;;;;;;;;;;;AC1CjH;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,mBAAmB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,mCAAmC;AAC3E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,gCAAgC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,QAAQ;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACkC;;;;;;;;;;;;;AC9GlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kBAAkB,EAAE;AACtD,+BAA+B,iBAAiB,EAAE;AAClD,kCAAkC,iBAAiB,EAAE;AACrD;AACA;AACA;AACA;AACA;AACA,gDAAgD,sBAAsB,EAAE;AACxE;AACA;AACA;AACA,6CAA6C,QAAQ,uDAAS;AAC9D;AACA,WAAW,yDAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,CAAC,EAAE;AACkF;;;;;;;;;;;;;AC9CrF;AAAA;AAAA;AAAA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,2BAA2B,EAAE;AACnE;AACwD;;;;;;;;;;;;;ACpBtD;AAAA;AAAA,IAAY,QAGX;AAHD,WAAY,QAAQ;IAClB,yEAAqB;IACrB,6EAAuB;AACzB,CAAC,EAHW,QAAQ,KAAR,QAAQ,QAGnB;;;;;;;;;;;;;;;;;;;;;;;;;;ACZwC;AACL;AAC+C;AACV;AACxB;AAC6C;AAEL;AACjD;AACf;AACnB,6EAAO,EAAE,6EAAS,CAAa;AAKvC;IAEE,gCACU,YAA0B,EACjB,wBAAkD,EAClD,iBAAoC;QAF7C,iBAAY,GAAZ,YAAY,CAAc;QACjB,6BAAwB,GAAxB,wBAAw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","file":"common.js","sourcesContent":["/**\n * Based on:\n * https://stackoverflow.com/questions/7348009/y-coordinate-for-a-given-x-cubic-bezier\n * https://math.stackexchange.com/questions/26846/is-there-an-explicit-form-for-cubic-b%C3%A9zier-curves\n * TODO: Reduce rounding error\n */\nvar Point = /** @class */ (function () {\n    function Point(x, y) {\n        this.x = x;\n        this.y = y;\n    }\n    return Point;\n}());\n/**\n * Given a cubic-bezier curve, get the x value (time) given\n * the y value (progression).\n * Ex: cubic-bezier(0.32, 0.72, 0, 1);\n * P0: (0, 0)\n * P1: (0.32, 0.72)\n * P2: (0, 1)\n * P3: (1, 1)\n *\n * If you give a cubic bezier curve that never reaches the\n * provided progression, this function will return NaN.\n */\nvar getTimeGivenProgression = function (p0, p1, p2, p3, progression) {\n    var tValues = solveCubicBezier(p0.y, p1.y, p2.y, p3.y, progression);\n    return solveCubicParametricEquation(p0.x, p1.x, p2.x, p3.x, tValues[0]); // TODO: Add better strategy for dealing with multiple solutions\n};\n/**\n * Solve a cubic equation in one dimension (time)\n */\nvar solveCubicParametricEquation = function (p0, p1, p2, p3, t) {\n    var partA = (3 * p1) * Math.pow(t - 1, 2);\n    var partB = (-3 * p2 * t) + (3 * p2) + (p3 * t);\n    var partC = p0 * Math.pow(t - 1, 3);\n    return t * (partA + (t * partB)) - partC;\n};\n/**\n * Find the `t` value for a cubic bezier using Cardano's formula\n */\nvar solveCubicBezier = function (p0, p1, p2, p3, refPoint) {\n    p0 -= refPoint;\n    p1 -= refPoint;\n    p2 -= refPoint;\n    p3 -= refPoint;\n    var roots = solveCubicEquation(p3 - 3 * p2 + 3 * p1 - p0, 3 * p2 - 6 * p1 + 3 * p0, 3 * p1 - 3 * p0, p0);\n    return roots.filter(function (root) { return root >= 0 && root <= 1; });\n};\nvar solveQuadraticEquation = function (a, b, c) {\n    var discriminant = b * b - 4 * a * c;\n    if (discriminant < 0) {\n        return [];\n    }\n    else {\n        return [\n            (-b + Math.sqrt(discriminant)) / (2 * a),\n            (-b - Math.sqrt(discriminant)) / (2 * a)\n        ];\n    }\n};\nvar solveCubicEquation = function (a, b, c, d) {\n    if (a === 0) {\n        return solveQuadraticEquation(b, c, d);\n    }\n    b /= a;\n    c /= a;\n    d /= a;\n    var p = (3 * c - b * b) / 3;\n    var q = (2 * b * b * b - 9 * b * c + 27 * d) / 27;\n    if (p === 0) {\n        return [Math.pow(-q, 1 / 3)];\n    }\n    else if (q === 0) {\n        return [Math.sqrt(-p), -Math.sqrt(-p)];\n    }\n    var discriminant = Math.pow(q / 2, 2) + Math.pow(p / 3, 3);\n    if (discriminant === 0) {\n        return [Math.pow(q / 2, 1 / 2) - b / 3];\n    }\n    else if (discriminant > 0) {\n        return [Math.pow(-(q / 2) + Math.sqrt(discriminant), 1 / 3) - Math.pow((q / 2) + Math.sqrt(discriminant), 1 / 3) - b / 3];\n    }\n    var r = Math.sqrt(Math.pow(-(p / 3), 3));\n    var phi = Math.acos(-(q / (2 * Math.sqrt(Math.pow(-(p / 3), 3)))));\n    var s = 2 * Math.pow(r, 1 / 3);\n    return [\n        s * Math.cos(phi / 3) - b / 3,\n        s * Math.cos((phi + 2 * Math.PI) / 3) - b / 3,\n        s * Math.cos((phi + 4 * Math.PI) / 3) - b / 3\n    ];\n};\nexport { Point as P, getTimeGivenProgression as g };\n","/**\n * Check to see if the Haptic Plugin is available\n * @return Returns `true` or false if the plugin is available\n */\n/**\n * Trigger a selection changed haptic event. Good for one-time events\n * (not for gestures)\n */\nvar hapticSelection = function () {\n    var engine = window.TapticEngine;\n    if (engine) {\n        engine.selection();\n    }\n};\n/**\n * Tell the haptic engine that a gesture for a selection change is starting.\n */\nvar hapticSelectionStart = function () {\n    var engine = window.TapticEngine;\n    if (engine) {\n        engine.gestureSelectionStart();\n    }\n};\n/**\n * Tell the haptic engine that a selection changed during a gesture.\n */\nvar hapticSelectionChanged = function () {\n    var engine = window.TapticEngine;\n    if (engine) {\n        engine.gestureSelectionChanged();\n    }\n};\n/**\n * Tell the haptic engine we are done with a gesture. This needs to be\n * called lest resources are not properly recycled.\n */\nvar hapticSelectionEnd = function () {\n    var engine = window.TapticEngine;\n    if (engine) {\n        engine.gestureSelectionEnd();\n    }\n};\nexport { hapticSelectionStart as a, hapticSelectionChanged as b, hapticSelectionEnd as c, hapticSelection as h };\n","/**\n * Does a simple sanitization of all elements\n * in an untrusted string\n */\nvar sanitizeDOMString = function (untrustedString) {\n    try {\n        if (typeof untrustedString !== 'string' || untrustedString === '') {\n            return untrustedString;\n        }\n        /**\n         * Create a document fragment\n         * separate from the main DOM,\n         * create a div to do our work in\n         */\n        var documentFragment_1 = document.createDocumentFragment();\n        var workingDiv = document.createElement('div');\n        documentFragment_1.appendChild(workingDiv);\n        workingDiv.innerHTML = untrustedString;\n        /**\n         * Remove any elements\n         * that are blocked\n         */\n        blockedTags.forEach(function (blockedTag) {\n            var getElementsToRemove = documentFragment_1.querySelectorAll(blockedTag);\n            for (var elementIndex = getElementsToRemove.length - 1; elementIndex >= 0; elementIndex--) {\n                var element = getElementsToRemove[elementIndex];\n                if (element.parentNode) {\n                    element.parentNode.removeChild(element);\n                }\n                else {\n                    documentFragment_1.removeChild(element);\n                }\n                /**\n                 * We still need to sanitize\n                 * the children of this element\n                 * as they are left behind\n                 */\n                var childElements = getElementChildren(element);\n                /* tslint:disable-next-line */\n                for (var childIndex = 0; childIndex < childElements.length; childIndex++) {\n                    sanitizeElement(childElements[childIndex]);\n                }\n            }\n        });\n        /**\n         * Go through remaining elements and remove\n         * non-allowed attribs\n         */\n        // IE does not support .children on document fragments, only .childNodes\n        var dfChildren = getElementChildren(documentFragment_1);\n        /* tslint:disable-next-line */\n        for (var childIndex = 0; childIndex < dfChildren.length; childIndex++) {\n            sanitizeElement(dfChildren[childIndex]);\n        }\n        // Append document fragment to div\n        var fragmentDiv = document.createElement('div');\n        fragmentDiv.appendChild(documentFragment_1);\n        // First child is always the div we did our work in\n        var getInnerDiv = fragmentDiv.querySelector('div');\n        return (getInnerDiv !== null) ? getInnerDiv.innerHTML : fragmentDiv.innerHTML;\n    }\n    catch (err) {\n        console.error(err);\n        return '';\n    }\n};\n/**\n * Clean up current element based on allowed attributes\n * and then recursively dig down into any child elements to\n * clean those up as well\n */\nvar sanitizeElement = function (element) {\n    // IE uses childNodes, so ignore nodes that are not elements\n    if (element.nodeType && element.nodeType !== 1) {\n        return;\n    }\n    for (var i = element.attributes.length - 1; i >= 0; i--) {\n        var attribute = element.attributes.item(i);\n        var attributeName = attribute.name;\n        // remove non-allowed attribs\n        if (!allowedAttributes.includes(attributeName.toLowerCase())) {\n            element.removeAttribute(attributeName);\n            continue;\n        }\n        // clean up any allowed attribs\n        // that attempt to do any JS funny-business\n        var attributeValue = attribute.value;\n        /* tslint:disable-next-line */\n        if (attributeValue != null && attributeValue.toLowerCase().includes('javascript:')) {\n            element.removeAttribute(attributeName);\n        }\n    }\n    /**\n     * Sanitize any nested children\n     */\n    var childElements = getElementChildren(element);\n    /* tslint:disable-next-line */\n    for (var i = 0; i < childElements.length; i++) {\n        sanitizeElement(childElements[i]);\n    }\n};\n/**\n * IE doesn't always support .children\n * so we revert to .childNodes instead\n */\nvar getElementChildren = function (el) {\n    return (el.children != null) ? el.children : el.childNodes;\n};\nvar allowedAttributes = ['class', 'id', 'href', 'src', 'name', 'slot'];\nvar blockedTags = ['script', 'style', 'iframe', 'meta', 'link', 'object', 'embed'];\nexport { sanitizeDOMString as s };\n","import { __awaiter, __generator } from \"tslib\";\nvar hostContext = function (selector, el) {\n    return el.closest(selector) !== null;\n};\n/**\n * Create the mode and color classes for the component based on the classes passed in\n */\nvar createColorClasses = function (color) {\n    var _a;\n    return (typeof color === 'string' && color.length > 0) ? (_a = {\n            'ion-color': true\n        },\n        _a[\"ion-color-\" + color] = true,\n        _a) : undefined;\n};\nvar getClassList = function (classes) {\n    if (classes !== undefined) {\n        var array = Array.isArray(classes) ? classes : classes.split(' ');\n        return array\n            .filter(function (c) { return c != null; })\n            .map(function (c) { return c.trim(); })\n            .filter(function (c) { return c !== ''; });\n    }\n    return [];\n};\nvar getClassMap = function (classes) {\n    var map = {};\n    getClassList(classes).forEach(function (c) { return map[c] = true; });\n    return map;\n};\nvar SCHEME = /^[a-z][a-z0-9+\\-.]*:/;\nvar openURL = function (url, ev, direction) { return __awaiter(void 0, void 0, void 0, function () {\n    var router;\n    return __generator(this, function (_a) {\n        if (url != null && url[0] !== '#' && !SCHEME.test(url)) {\n            router = document.querySelector('ion-router');\n            if (router) {\n                if (ev != null) {\n                    ev.preventDefault();\n                }\n                return [2 /*return*/, router.push(url, direction)];\n            }\n        }\n        return [2 /*return*/, false];\n    });\n}); };\nexport { createColorClasses as c, getClassMap as g, hostContext as h, openURL as o };\n","var watchForOptions = function (containerEl, tagName, onChange) {\n    var mutation = new MutationObserver(function (mutationList) {\n        onChange(getSelectedOption(mutationList, tagName));\n    });\n    mutation.observe(containerEl, {\n        childList: true,\n        subtree: true\n    });\n    return mutation;\n};\nvar getSelectedOption = function (mutationList, tagName) {\n    var newOption;\n    mutationList.forEach(function (mut) {\n        // tslint:disable-next-line: prefer-for-of\n        for (var i = 0; i < mut.addedNodes.length; i++) {\n            newOption = findCheckedOption(mut.addedNodes[i], tagName) || newOption;\n        }\n    });\n    return newOption;\n};\nvar findCheckedOption = function (el, tagName) {\n    if (el.nodeType !== 1) {\n        return undefined;\n    }\n    var options = (el.tagName === tagName.toUpperCase())\n        ? [el]\n        : Array.from(el.querySelectorAll(tagName));\n    return options.find(function (o) { return o.checked === true; });\n};\nexport { findCheckedOption as f, watchForOptions as w };\n","export interface ApplePayResponse {\r\n    success: boolean;\r\n    errorMessage: string;\r\n    accountId: string;\r\n    selectedAccount?: { accountDisplayName: string };\r\n    amount?: string;\r\n    sourceAcc?: { accountTender: string };\r\n  }\r\n\r\n  export enum ApplePay {\r\n    ORDERS_WITH_APPLE_PAY,\r\n    DEPOSITS_WITH_APPLE_PAY,\r\n  }","import { Injectable } from '@angular/core';\r\nimport { take } from 'rxjs/operators';\r\nimport { InAppBrowser, InAppBrowserOptions } from '@ionic-native/in-app-browser/ngx';\r\nimport { AuthFacadeService } from '@core/facades/auth/auth.facade.service';\r\nimport { Environment } from '../../../environment';\r\nimport { InstitutionFacadeService } from '@core/facades/institution/institution.facade.service';\r\nimport { USAePayResponse } from '@core/model/add-funds/usaepay-response.model';\r\nimport { ApplePayResponse, ApplePay } from '@core/model/add-funds/applepay-response.model';\r\nimport { Plugins } from '@capacitor/core';\r\nimport { zip } from 'rxjs';\r\nconst { Browser, IOSDevice } = Plugins;\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ExternalPaymentService {\r\n\r\n  constructor(\r\n    private inAppBrowser: InAppBrowser,\r\n    private readonly institutionFacadeService: InstitutionFacadeService,\r\n    private readonly authFacadeService: AuthFacadeService\r\n  ) {}\r\n\r\n  /* USAePay */\r\n  /* WKWebView is the required webview by Apple  */\r\n\r\n  addUSAePayCreditCard(): Promise<USAePayResponse> {\r\n    return new Promise<USAePayResponse>((resolve, reject) => {\r\n      const authTokenObservable = this.authFacadeService.getAuthenticationToken$().pipe(take(1));\r\n      const institutionInfoObservable = this.institutionFacadeService.cachedInstitutionInfo$.pipe(take(1));\r\n      zip(authTokenObservable, institutionInfoObservable).subscribe(\r\n        ([authToken, institutionInfo]) => {\r\n          const browser = this.openUSAePayPage(authToken, institutionInfo.shortName);\r\n          browser.on('loadstart').subscribe(event => {\r\n            this.handleUSAePayResponse(event, resolve, reject, browser);\r\n          });\r\n          browser.on('loaderror').subscribe(() => {\r\n            reject('Your request failed. Please try again.');\r\n            browser.close();\r\n          });\r\n        },\r\n        error => {\r\n          reject({ success: false, errorMessage: `The request failed: ${error}` });\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /* Apple Pay */\r\n  /* Safari browser is required by Aople to use Apple Pay */\r\n\r\n  async payWithApplePay(handleApplePay: ApplePay, queryParams: Object): Promise<any> {\r\n    return new Promise<any>((resolve, reject) => {\r\n      const authTokenObservable = this.authFacadeService.getAuthenticationToken$().pipe(take(1));\r\n      const institutionInfoObservable = this.institutionFacadeService.cachedInstitutionInfo$.pipe(take(1));\r\n      zip(authTokenObservable, institutionInfoObservable).subscribe(\r\n        async ([authToken, institutionInfo]) => {\r\n          await this.openApplePayPage(queryParams, handleApplePay, authToken, institutionInfo.shortName);\r\n        },\r\n        error => {\r\n          reject({ success: false, errorMessage: `The request failed: ${error}` });\r\n        }\r\n      );\r\n        this.handleApplePayResponse(resolve, reject);\r\n    });\r\n  }\r\n\r\n  private async openApplePayPage(queryParams: Object, handleApplePay: ApplePay, authToken: string, shortName: string) {\r\n    let fullURL = this.getApplePayURL(queryParams, handleApplePay, authToken, shortName);\r\n    await Browser.open({ url: `${fullURL}` });\r\n  }\r\n\r\n  private openUSAePayPage(authToken: string, shortName: string) {\r\n    const target = '_blank';\r\n    const url = `${Environment.getSitesURL()}/${shortName}/full/add_card_mobile.php?session_token=${authToken}`;\r\n    const options: InAppBrowserOptions = {\r\n      usewkwebview: 'yes',\r\n      toolbarposition: 'top',\r\n      closebuttoncaption: 'Back',\r\n      location: 'no',\r\n      hidenavigationbuttons: 'yes',\r\n      toolbarcolor: '#ffffff',\r\n    };\r\n    const browser = this.inAppBrowser.create(url, target, options);\r\n    return browser;\r\n  }\r\n\r\n  private getApplePayURL(queryParams: Object, handleApplePay: ApplePay, authToken: string, shortName: string) {\r\n    let fullURL = '';\r\n    const params = JSON.parse(JSON.stringify(queryParams));\r\n    const applePayBaseURL = `${Environment.getSitesURL()}/${shortName}/full/applepay.php?`;\r\n    if (handleApplePay === ApplePay.ORDERS_WITH_APPLE_PAY) {\r\n      fullURL = `${applePayBaseURL}order_total=${params.total || ''}&session_token=${authToken ||\r\n        ''}&sub_total=${params.subTotal || ''}&fee=${params.useFee || ''}&tax=${params.tax ||\r\n        '0.00'}&discount=${params.discount || '0.00'}&pickup_fee=${params.pickupFee ||\r\n        ''}&delivery_fee=${params.deliveryFee || ''}&tip=${params.tip || ''}`;\r\n    } else if (handleApplePay === ApplePay.DEPOSITS_WITH_APPLE_PAY) {\r\n      fullURL = `${applePayBaseURL}amount=${params.depositAmount || ''}&select_account=${params.accountId ||\r\n        ''}&session_token=${authToken || ''}`;\r\n    }\r\n    return fullURL;\r\n  }\r\n\r\n  private handleUSAePayResponse(\r\n    event,\r\n    resolve: (value?: USAePayResponse | PromiseLike<USAePayResponse>) => void,\r\n    reject: (reason?: any) => void,\r\n    browser\r\n  ) {\r\n    if (event && event.url) {\r\n      const url = event.url;\r\n      if (url.includes('action_complete')) {\r\n        if (url.includes('action_complete=1')) {\r\n          resolve(<USAePayResponse>{ success: true });\r\n        } else if (url.includes('error=')) {\r\n          const errorMessage = new URLSearchParams(url).get('error');\r\n          reject(`Your request failed: ${errorMessage}. Please try again.`);\r\n        }\r\n        browser.close();\r\n      }\r\n    }\r\n  }\r\n\r\n  private handleApplePayResponse(resolve: (value?: any) => void, reject: (reason?: any) => void) {\r\n    const applePayEvent = IOSDevice.addListener('ApplePayEvent', async (info: any) => {\r\n      if (info.url && info.url.includes('applepay')) {\r\n        if (info.url.includes('status=success')) {\r\n          const accountId = new URLSearchParams(info.url).get('accountId') || '';\r\n          const accountName = new URLSearchParams(info.url).get('accountName') || '';\r\n          const amount = new URLSearchParams(info.url).get('amount') || '';\r\n          resolve(<ApplePayResponse>{\r\n            success: true,\r\n            amount: amount,\r\n            selectedAccount: { accountDisplayName: accountName },\r\n            accountId: accountId,\r\n            sourceAcc: { accountTender: 'Apple Pay' },\r\n          });\r\n        } else {\r\n          reject({ success: false, errorMessage: 'The request failed.' });\r\n        }\r\n      } else {\r\n        reject({ success: false, errorMessage: 'The request failed.' });\r\n      }\r\n      await Browser.close().then(() => {\r\n        applePayEvent.remove();\r\n      })\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { CommerceApiService } from 'src/app/core/service/commerce/commerce-api.service';\r\nimport { Observable, BehaviorSubject, zip, of, combineLatest } from 'rxjs';\r\nimport { UserAccount } from 'src/app/core/model/account/account.model';\r\nimport { map, tap, switchMap, take } from 'rxjs/operators';\r\nimport { SettingInfo } from 'src/app/core/model/configuration/setting-info.model';\r\nimport { CONTENT_STRINGS, PAYMENT_SYSTEM_TYPE } from '@sections/accounts/accounts.config';\r\nimport { BillMeMapping } from '@core/model/settings/billme-mapping.model';\r\nimport { ContentStringInfo } from '@core/model/content/content-string-info.model';\r\nimport { CONTENT_STINGS_CATEGORIES, CONTENT_STINGS_DOMAINS } from '../../../content-strings';\r\nimport { ContentStringsApiService } from '@core/service/content-service/content-strings-api.service';\r\nimport { SettingsFacadeService } from '@core/facades/settings/settings-facade.service';\r\nimport { Settings } from '../../../app.global';\r\n\r\n@Injectable()\r\nexport class DepositService {\r\n  private readonly _accounts$: BehaviorSubject<UserAccount[]> = new BehaviorSubject<UserAccount[]>([]);\r\n  public readonly _settings$: BehaviorSubject<SettingInfo[]> = new BehaviorSubject<SettingInfo[]>([]);\r\n\r\n  private contentString;\r\n\r\n  constructor(\r\n    private readonly commerceApiService: CommerceApiService,\r\n    private readonly contentService: ContentStringsApiService,\r\n    private readonly settingsFacadeService: SettingsFacadeService\r\n  ) {}\r\n\r\n  get accounts$(): Observable<UserAccount[]> {\r\n    return this._accounts$.asObservable();\r\n  }\r\n\r\n  private set _accounts(value: UserAccount[]) {\r\n    this._accounts$.next([...value]);\r\n  }\r\n\r\n  get settings$(): Observable<SettingInfo[]> {\r\n    return this._settings$.asObservable();\r\n  }\r\n\r\n  private set _settings(value: SettingInfo[]) {\r\n    this._settings$.next([...value]);\r\n  }\r\n\r\n  getUserAccounts(): Observable<UserAccount[]> {\r\n    return this.commerceApiService.getUserAccounts().pipe(tap(accounts => (this._accounts = accounts)));\r\n  }\r\n\r\n  getUserSettings(settings: Settings.Setting[]): Observable<SettingInfo[]> {\r\n    const requestArray = settings.map(setting => this.settingsFacadeService.getSetting(setting));\r\n\r\n    return zip(...requestArray).pipe(tap(settings => (this._settings = settings)));\r\n  }\r\n\r\n  getSettingByName(settings: SettingInfo[], name: string): SettingInfo | undefined {\r\n    return settings.find(({ name: n }) => n === name);\r\n  }\r\n\r\n  filterAccountsByPaymentSystem(accounts: Array<UserAccount>): Array<UserAccount> {\r\n    return accounts.filter(\r\n      ({ paymentSystemType: type }) => type === PAYMENT_SYSTEM_TYPE.MONETRA || type === PAYMENT_SYSTEM_TYPE.USAEPAY\r\n    );\r\n  }\r\n\r\n  filterCreditCardDestAccounts(tendersId: Array<string>, accounts: Array<UserAccount>): Array<UserAccount> {\r\n    return accounts.filter(\r\n      ({ depositAccepted, accountTender }) => depositAccepted && tendersId.includes(accountTender)\r\n    );\r\n  }\r\n\r\n  filterBillmeDestAccounts(billmeMappingArr: Array<BillMeMapping>, accounts: Array<UserAccount>): Array<UserAccount> {\r\n    return accounts.filter(destinationAccount => {\r\n      const destTender = destinationAccount.accountTender || null;\r\n      const destDepositAccepted = destinationAccount.depositAccepted || false;\r\n      /// destination account deposits accepted?\r\n      if (destDepositAccepted && destTender) {\r\n        /* if an account in our account array matches the source tender\r\n        associated to the billMe map with the destination\r\n        account as the destination tender, then we have a destination\r\n        account with an associated source account.  This destination account is legit */\r\n        return (\r\n          billmeMappingArr\r\n            .filter(({ destination }) => destTender === destination)\r\n            .filter(bmi => {\r\n              return accounts.filter(sourceAccount => sourceAccount.accountTender === bmi.source).length > 0;\r\n            }).length > 0\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  filterBillmeSourceAccounts(billmeMappingArr: Array<BillMeMapping>, accounts: Array<UserAccount>): Array<UserAccount> {\r\n    return billmeMappingArr.reduce((res, { source, destination }) => {\r\n      const sourceAcc = accounts.find(\r\n        acc =>\r\n          acc.accountTender === source &&\r\n          accounts.some(({ depositAccepted: dAccepted, accountTender: tender }) => dAccepted && tender === destination)\r\n      );\r\n      return sourceAcc ? [...res, sourceAcc] : res;\r\n    }, []);\r\n  }\r\n\r\n  sourceAccForBillmeDeposit(\r\n    selectedAccount: UserAccount,\r\n    billmeMappingArr: Array<BillMeMapping>\r\n  ): Observable<UserAccount> {\r\n    const filterByBillme = accTender => billmeMappingArr.find(billmeMap => billmeMap['destination'] === accTender);\r\n\r\n    return of(filterByBillme(selectedAccount.accountTender)).pipe(\r\n      switchMap(billmeMapObj => {\r\n        return this.accounts$.pipe(\r\n          map(accounts => accounts.find(({ accountTender }) => billmeMapObj['source'] === accountTender))\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  calculateDepositFee(fromAccountId, toAccountId, amount): Observable<number> {\r\n    return this.commerceApiService.calculateDepositFee(fromAccountId, toAccountId, amount);\r\n  }\r\n\r\n  deposit(fromAccountId, toAccountId, amount, fromAccountCvv): Observable<string> {\r\n    return this.commerceApiService.deposit(fromAccountId, toAccountId, amount, fromAccountCvv);\r\n  }\r\n\r\n  initContentStringsList(): Observable<ContentStringInfo[]> {\r\n    return combineLatest(\r\n      this.contentService.retrieveContentStringByConfig({\r\n        domain: CONTENT_STINGS_DOMAINS.patronUi,\r\n        category: CONTENT_STINGS_CATEGORIES.accounts,\r\n        name: CONTENT_STRINGS.creditDepositReviewInstructions,\r\n      }),\r\n      this.contentService.retrieveContentStringByConfig({\r\n        domain: CONTENT_STINGS_DOMAINS.patronUi,\r\n        category: CONTENT_STINGS_CATEGORIES.accounts,\r\n        name: CONTENT_STRINGS.billMeDepositReviewInstructions,\r\n      })\r\n    ).pipe(\r\n      map(([res, res0]) => {\r\n        const finalArray = [res, res0];\r\n        this.contentString = finalArray.reduce((init, elem) => ({ ...init, [elem.name]: elem.value }), {});\r\n        return finalArray;\r\n      }),\r\n      take(1)\r\n    );\r\n  }\r\n\r\n  getContentValueByName(name: string): string {\r\n    return this.contentString[name] || '';\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { CreditCardTypePipe } from './credit-card-type.pipe';\r\n\r\nconst declarations = [CreditCardTypePipe];\r\n\r\n@NgModule({\r\n  declarations,\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: declarations\r\n})\r\nexport class CreditCardTypeModule { }\r\n","export enum EXPLORE_ROUTING {\r\n  merchantDetails = 'merchant-details',\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { MerchantFacadeService } from '@core/facades/merchant/merchant-facade.service';\r\nimport { FavoriteMerchantsFacadeService } from '@core/facades/favourite-merchant/favorite-merchants-facade.service';\r\nimport { MenuMerchantFacadeService } from '@core/facades/menu-merchant/menu-merchant-facade.service';\r\nimport { combineLatest, Observable, zip } from 'rxjs';\r\nimport { MerchantInfo } from '@sections/ordering';\r\nimport { map } from 'rxjs/operators';\r\nimport { SettingsFacadeService } from '@core/facades/settings/settings-facade.service';\r\nimport { SettingInfo } from '@core/model/configuration/setting-info.model';\r\nimport { Settings } from '../../../app.global';\r\nimport { exploreMerchantSorting } from '@core/utils/general-helpers';\r\n\r\n@Injectable()\r\nexport class ExploreService {\r\n\r\n  constructor(private readonly merchantFacadeService: MerchantFacadeService,\r\n              private readonly favoriteMerchantsFacadeService: FavoriteMerchantsFacadeService,\r\n              private readonly menuMerchantFacadeService: MenuMerchantFacadeService,\r\n              private readonly settingsFacadeService: SettingsFacadeService) {\r\n  }\r\n\r\n  get merchants$(): Observable<MerchantInfo[]> {\r\n    return combineLatest(\r\n      this.merchantFacadeService.merchants$,\r\n      this.favoriteMerchantsFacadeService.favoriteMerchants$,\r\n      this.menuMerchantFacadeService.menuMerchants$,\r\n      this.getFoodSetting(),\r\n    ).pipe(\r\n      map(([merchants, favMerchants, menuMerchants, enableFoodSetting]) =>\r\n        this.updateMerchantInfo(merchants, favMerchants, menuMerchants, enableFoodSetting)),\r\n    );\r\n  }\r\n\r\n  get sortedMerchants$(): Observable<MerchantInfo[]> {\r\n    return this.merchants$.pipe(map(exploreMerchantSorting));\r\n  }\r\n\r\n  getFoodSetting(): Observable<SettingInfo> {\r\n    return this.settingsFacadeService.getSetting(Settings.Setting.FOOD_ENABLED);\r\n  }\r\n\r\n  getMerchantById$(id: string): Observable<MerchantInfo> {\r\n    return this.merchants$.pipe(\r\n      map(merchants => merchants.find(({ id: mId }) => id === mId)),\r\n    );\r\n  }\r\n\r\n  getInitialMerchantData$(): Observable<[MerchantInfo[], MerchantInfo[], MerchantInfo[]]> {\r\n    return zip(\r\n      this.merchantFacadeService.fetchMerchants$(),\r\n      this.favoriteMerchantsFacadeService.fetchFavoritesMerchants$(),\r\n      this.menuMerchantFacadeService.fetchMenuMerchant$(),\r\n    );\r\n  }\r\n\r\n  private updateMerchantInfo(\r\n    merchants: MerchantInfo[] = [],\r\n    favMerchants: MerchantInfo[] = [],\r\n    menuMerchants: MerchantInfo[] = [],\r\n    foodEnabledSetting: SettingInfo): MerchantInfo[] {\r\n    const isFoodEnabled = foodEnabledSetting && Boolean(Number(foodEnabledSetting.value));\r\n    const menuIds = menuMerchants.map(({ id }) => id);\r\n    const favIds = favMerchants.map(({ id }) => id);\r\n\r\n    return merchants.map(merchant => ({\r\n      ...merchant,\r\n      isFavorite: favIds.includes(merchant.id),\r\n      isAbleToOrder: menuIds.includes(merchant.id) && isFoodEnabled,\r\n    }));\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { MerchantListComponent } from '@sections/ordering';\r\nimport { MerchantItemComponent } from './merchant-item';\r\nimport { OrderOptionsActionSheetModule } from '@sections/ordering/shared/ui-components/order-options.action-sheet';\r\nimport { StopPropagationModule } from '@shared/directives/stop-propogation/stop-propagation.module';\r\nimport { MerchantDistanceModule } from '@shared/pipes/merchant-distance/merchant-distance.module';\r\nimport { OrderTypePipeModule } from '@sections/ordering/shared/pipes/order-type/order-type.module';\r\n\r\nconst declarations = [MerchantListComponent, MerchantItemComponent];\r\n\r\n@NgModule({\r\n  declarations,\r\n  exports: [MerchantListComponent],\r\n  imports: [CommonModule, IonicModule, MerchantDistanceModule, OrderOptionsActionSheetModule, StopPropagationModule, OrderTypePipeModule],\r\n})\r\nexport class MerchantListModule {}\r\n","import { Injectable } from '@angular/core';\r\nimport { Resolve } from '@angular/router';\r\nimport { Observable, zip } from 'rxjs';\r\nimport { LoadingService } from '@core/service/loading/loading.service';\r\nimport { finalize, first, skipWhile, switchMap } from 'rxjs/operators';\r\nimport { CartService, MerchantAccountInfoList, MerchantService } from '@sections/ordering';\r\nimport { SettingInfo } from '@core/model/configuration/setting-info.model';\r\nimport { Settings } from '../../../app.global';\r\nimport { SettingsFacadeService } from '@core/facades/settings/settings-facade.service';\r\n\r\n@Injectable()\r\nexport class CartResolver implements Resolve<Observable<[SettingInfo[], MerchantAccountInfoList]>> {\r\n\r\n  constructor(private readonly settingsFacadeService: SettingsFacadeService,\r\n              private readonly loadingService: LoadingService,\r\n              private readonly merchantService: MerchantService,\r\n              private readonly cartService: CartService) {\r\n  }\r\n\r\n  resolve(): Observable<[SettingInfo[], MerchantAccountInfoList]> {\r\n    this.loadingService.showSpinner();\r\n\r\n    const requiredSettings = [\r\n      Settings.Setting.DISPLAY_TENDERS,\r\n      Settings.Setting.DISPLAY_CREDIT_CARDS,\r\n      Settings.Setting.CREDIT_PAYMENT_SYSTEM_TYPE\r\n    ];\r\n\r\n    const accountsCall = this.cartService.merchant$.pipe(\r\n      skipWhile((merchant) => !merchant),\r\n      switchMap(({id}) => this.merchantService.getMerchantPaymentAccounts(id))\r\n    );\r\n    const settingsCall = this.settingsFacadeService.getSettings(requiredSettings);\r\n\r\n    return zip(settingsCall ,accountsCall).pipe(\r\n      finalize(() => this.loadingService.closeSpinner()),\r\n      first()\r\n    );\r\n  }\r\n}\r\n","import { Resolve } from '@angular/router';\r\nimport { MerchantService, OrderInfo } from '@sections/ordering';\r\nimport { Injectable } from '@angular/core';\r\nimport { take } from 'rxjs/operators';\r\nimport { LoadingService } from '@core/service/loading/loading.service';\r\n\r\n@Injectable()\r\nexport class RecentOrdersResolver implements Resolve<Promise<OrderInfo[]>> {\r\n\r\n  constructor(private readonly merchantService: MerchantService,\r\n              private readonly loadingService: LoadingService) {\r\n  }\r\n\r\n  async resolve(): Promise<OrderInfo[]> {\r\n    await this.loadingService.showSpinner();\r\n\r\n    return new Promise<OrderInfo[]>((resolve, reject) =>\r\n      this.merchantService.getRecentOrders()\r\n        .pipe(take(1))\r\n        .subscribe(\r\n          (orders) => this.loadingService.closeSpinner().then(() => resolve(orders)),\r\n          () => this.loadingService.closeSpinner().then(() => reject())),\r\n    );\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { OrderTypePipe } from './order-type.pipe';\r\n\r\nconst declarations = [OrderTypePipe];\r\n\r\n@NgModule({\r\n  declarations,\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: declarations\r\n})\r\nexport class OrderTypePipeModule { }\r\n","import { Pipe, PipeTransform, ChangeDetectorRef } from '@angular/core';\r\nimport { take } from 'rxjs/operators';\r\n\r\nimport { OrderingService } from '@sections/ordering/services/ordering.service';\r\nimport { ORDERING_CONTENT_STRINGS } from '@sections/ordering/ordering.config';\r\nimport { MerchantOrderTypesInfo } from '../../models/merchant-order-types-info.model';\r\n\r\n@Pipe({\r\n  name: 'orderTypePipe',\r\n  pure: false,\r\n})\r\nexport class OrderTypePipe implements PipeTransform {\r\n  private labelPickup: string;\r\n  private labelDelivery: string;\r\n\r\n  constructor(private readonly orderingService: OrderingService, private readonly cdRef: ChangeDetectorRef) {\r\n    this.initContentStrings();\r\n  }\r\n\r\n  transform(value: MerchantOrderTypesInfo): string {\r\n    const { pickup, delivery } = value;\r\n    if (!value || (!delivery && !pickup)) {\r\n      return '';\r\n    }\r\n    if (value.delivery && value.pickup) {\r\n      return `${this.labelPickup} & ${this.labelDelivery}`;\r\n    }\r\n\r\n    return delivery ? this.labelDelivery : this.labelPickup;\r\n  }\r\n\r\n  private async initContentStrings(): Promise<void> {\r\n    this.labelPickup = await this.orderingService\r\n      .getContentStringByName(ORDERING_CONTENT_STRINGS.labelPickup)\r\n      .pipe(take(1))\r\n      .toPromise();\r\n\r\n    this.labelDelivery = await this.orderingService\r\n      .getContentStringByName(ORDERING_CONTENT_STRINGS.labelDelivery)\r\n      .pipe(take(1))\r\n      .toPromise();\r\n    this.cdRef.detectChanges();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { ConfirmPopoverComponent } from './confirm-popover.component';\r\nimport { StPopoverLayoutModule } from '@shared/ui-components/st-popover-layout/st-popover-layout.module';\r\n\r\nconst declarations = [ConfirmPopoverComponent];\r\n\r\n@NgModule({\r\n  declarations,\r\n  exports: [ConfirmPopoverComponent],\r\n  imports: [CommonModule, IonicModule, StPopoverLayoutModule],\r\n  entryComponents: [ConfirmPopoverComponent],\r\n})\r\nexport class ConfirmPopoverModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { StSpinnerComponent } from './st-spinner.component';\r\n\r\nconst declarations = [StSpinnerComponent];\r\n\r\n@NgModule({\r\n  declarations,\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  exports: declarations\r\n})\r\nexport class StSpinnerModule { }\r\n"],"sourceRoot":""}