<ion-content class="ion-padding application-details__content" #content>
  <div class="application-details__actions">
    <ion-button class="btn application-details__page-back" routerDirection="back" mode="ios" fill="clear">
      Cancel
    </ion-button>
    <ion-button class="btn application-details__save" mode="ios" fill="clear" (click)="save(applicationDetails)">
      Save
    </ion-button>
  </div>
  <h2 class="application-details__title">2022 Housing Application</h2>
  <div class="application-details__card">
    <h3>
      As part of the application submission process, a one-time payment is required. Please review the amount below and
      select a payment method.
    </h3>
    <form novalidate [formGroup]="guestDepositForm">
      <div class="deposit__main-input-container">
        <ion-input
          class="deposit__main-input"
          type="tel"
          inputmode="decimal"
          maxlength="10"
          #inputText
          placeholder="0"
          tabindex="0"
          [ngStyle]="{ width: inputText.value ? inputText.value.length + 1 + 'ch' : '2ch' }"
          [ngClass]="{
            'deposit__main-input--focus': focusLine,
            shakeit: isMaxCharLength,
            'deposit__main-input-container--decrease-font': inputText.value && inputText.value.length >= 7
          }"
          (ionFocus)="focusLine = true"
          (ionBlur)="focusLine = false; onAmountChanged($event)"
          (ionInput)="onAmountChanged($event)"
          (keydown)="formatInput($event)"
          formControlName="mainInput"
        ></ion-input>
        <div *ngIf="mainFormInput.errors && mainFormInput.errors['maxLength']" class="deposit__main-input--error">
          {{ contentString.maxAmountError }} {{ mainFormInput.errors['maxLength'].max | transactionUnits }}
        </div>
        <div *ngIf="mainFormInput.errors && mainFormInput.errors['minLength']" class="deposit__main-input--error">
          {{ contentString.minAmountError }} {{ mainFormInput.errors['minLength'].min | transactionUnits }}
        </div>
        <div
          *ngIf="
            mainFormInput.errors && mainFormInput.errors['pattern'] && (mainFormInput.dirty || mainFormInput.touched)
          "
          class="deposit__main-input--error"
        >
          {{ contentString.amountPatternError }}
        </div>
      </div>
    </form>
    <st-cards [contentStrings]="contentStrings" [userAccounts]="userAccounts"></st-cards>
  </div>
</ion-content>
