<st-header
  [isTitleShow]="true"
  [backButtonIcon]="'close-outline'"
  [isBackButtonShow]="true"
  [isToolbarShow]="true"
  [title]="'Photo Upload'"
>
</st-header>
<ion-content class="container">
  <!-- TOP OF WHAT WILL GET MOVED TO THE PHOTO UPLOAD HTML FILE -->
  <ion-card *ngIf="govtIdRequired$ | async" class="id-photo-upload-container">
    <!-- HEADER MESSAGE FOR ID UPLOADS -->
    <ion-card-header>
      <div class="header-message-container-id">
        <div class="icon-cont">
          <ion-icon name="information-circle-outline" class="icon"></ion-icon>
        </div>
        <div class="header-message">
          <div class="key-message">
            A government issued ID is required to submit a new photo.
          </div>
          <div class="secondary-message">
            e.g., Passport, Driverâ€™s License, State ID
          </div>
        </div>
      </div>
    </ion-card-header>
    <!-- CONTAINER FOR ID PHOTOS -->
    <ion-card-content class="photo-upload-cont">
      <!--      FRONT OF ID -->
      <div
        class="stored-img-cont round-corners"
        [ngClass]="{
          'border-solid':
            this.localPhotoUploadStatus.govIdFront === localPhotoStatus.NEW ||
            this.localPhotoUploadStatus.govIdFront === localPhotoStatus.ACCEPTED,
          'border-dashed':
            this.localPhotoUploadStatus.govIdFront !== localPhotoStatus.NEW &&
            this.localPhotoUploadStatus.govIdFront !== localPhotoStatus.ACCEPTED
        }"
      >
        <div>
          Front of ID
        </div>
        <div *ngIf="(govIdFront$ | async) as govidFrontUrl; else defaultGovIdFront">
          <img [src]="govidFrontUrl" alt="Government Id Front" width="132" height="80" class="round-corners" />
          <ion-button color="light" class="reupload-btn round-corners" (click)="onTakePhoto(photoType.GOVT_ID_FRONT)"
            >REUPLOAD</ion-button
          >
        </div>
        <ng-template #defaultGovIdFront>
          <img src="/assets/images/govt-id-front.svg" alt="Government Id Front" class="card-img round-corners" />
          <ion-button class="upload-btn round-corners" (click)="onTakePhoto(photoType.GOVT_ID_FRONT)"
            >UPLOAD</ion-button
          >
        </ng-template>
      </div>
      <!--    BACK OF ID  -->
      <div
        class="stored-img-cont round-corners"
        [ngClass]="{
          'border-solid':
            this.localPhotoUploadStatus.govIdBack === localPhotoStatus.NEW ||
            this.localPhotoUploadStatus.govIdBack === localPhotoStatus.ACCEPTED,
          'border-dashed':
            this.localPhotoUploadStatus.govIdBack !== localPhotoStatus.NEW &&
            this.localPhotoUploadStatus.govIdBack !== localPhotoStatus.ACCEPTED
        }"
      >
        <div>
          Back of ID
        </div>
        <div *ngIf="(govIdBack$ | async) as govIdBackUrl; else defaultGovIdBack">
          <img [src]="govIdBackUrl" alt="Government Id Front" width="132" height="80" class="round-corners" />
          <ion-button color="light" class="reupload-btn round-corners" (click)="onTakePhoto(photoType.GOVT_ID_BACK)"
            >REUPLOAD</ion-button
          >
        </div>
        <ng-template #defaultGovIdBack>
          <img src="/assets/images/govt-id-back.svg" alt="Government Id Back" class="card-img round-corners" />
          <ion-button class="upload-btn round-corners" (click)="onTakePhoto(photoType.GOVT_ID_BACK)">UPLOAD</ion-button>
        </ng-template>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- CARD FOR PROFILE PHOTOS -->
  <ion-card class="selfie-photo-container">
    <!-- MESSAGE FOR PROFILE PHOTOS -->
    <ion-card-header>
      <div
        *ngIf="
          this.localPhotoUploadStatus.profilePending !== localPhotoStatus.NEW ||
            this.localPhotoUploadStatus.profilePending !== localPhotoStatus.PENDING;
          else profileImagePending
        "
        class="header-message-container-selfie"
      >
        <div class="icon-cont">
          <ion-icon name="information-circle-outline" class="icon"></ion-icon>
        </div>
        <div class="header-message">
          <div class="key-message">
            New photo is subject to admin approval!
          </div>
        </div>
      </div>
      <ng-template #profileImagePending>
        <div class="header-message-container-selfie-submitted">
          <div class="icon-cont">
            <ion-icon name="checkmark-circle" class="icon"></ion-icon>
          </div>
          <div class="header-message">
            <div class="key-message-submitted">
              Your photo has been submitted and is now pending admin approval. Use the content string!
            </div>
          </div>
        </div>
      </ng-template>
    </ion-card-header>
    <!-- CONTAINER FOR PROFILE PHOTOS -->
    <ion-card-content class="photo-upload-cont">
      <div class="stored-img-cont round-corners grey-background">
        <div>
          Current Photo
        </div>
        <div *ngIf="(profileImage$ | async) as profileImageUrl; else defaultProfileImage">
          <img [src]="profileImageUrl" alt="Profile Image" width="132" height="178" class="round-corners" />
        </div>
        <ng-template #defaultProfileImage>
          <img
            src="/assets/images/profile-image-default.svg"
            alt="Profile Image"
            class="profile-default-image round-corners"
          />
        </ng-template>
      </div>
      <div
        class="stored-img-cont round-corners"
        [ngClass]="{
          'border-solid':
            this.localPhotoUploadStatus.profilePending === localPhotoStatus.NEW ||
            this.localPhotoUploadStatus.profilePending === localPhotoStatus.PENDING,
          'border-dashed':
            this.localPhotoUploadStatus.profilePending !== localPhotoStatus.NEW &&
            this.localPhotoUploadStatus.profilePending !== localPhotoStatus.PENDING
        }"
      >
        <div>
          New Photo
        </div>
        <div *ngIf="(profileImagePending$ | async) as profileImagePendingUrl; else defaultPendingProfileImage">
          <img
            [src]="profileImagePendingUrl"
            alt="Pending Profile Image"
            width="132"
            height="178"
            class="round-corners"
          />
          <ion-button
            *ngIf="localPhotoUploadStatus.profilePending === localPhotoStatus.NEW || localPhotoUploadStatus.profilePending === localPhotoStatus.PENDING"
            class="upload-btn"
            (click)="onTakePhoto(photoType.PROFILE)"
            >REUPLOAD</ion-button
          >
          <ion-button
            *ngIf="localPhotoUploadStatus.profilePending === localPhotoStatus.PENDING"
            color="danger"
            class="reupload-btn"
            (click)="deletePendingProfileImage()"
            >DELETE</ion-button
          >
        </div>
        <ng-template #defaultPendingProfileImage>
          <img
            src="/assets/images/profile-image-default.svg"
            alt="Pending Profile Image"
            class="profile-default-image round-corners"
          />
          <ion-button class="upload-btn" (click)="onTakePhoto(photoType.PROFILE)">UPLOAD</ion-button>
        </ng-template>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- BUTTON THAT SUBMITS ALL PHOTOS  -->
  <div class="action-btn-container">
    <ion-button color="primary" [disabled]="submitButtonDisabled" class="submit-btn" (click)="submitPhotos()"
      >SUBMIT PHOTOS FOR REVIEW</ion-button
    >
  </div>
</ion-content>
