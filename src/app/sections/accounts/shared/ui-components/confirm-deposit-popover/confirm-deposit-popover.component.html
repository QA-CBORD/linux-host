<st-popover-layout [popoverConfig]="popoverConfig">
  <section class="cdp__policy-container" *ngIf="showDepositInstructions">
    <h5 class="cdp__policy-title">{{ contentString.title }}</h5>
    <div class="cdp__policy-body">
      {{ popoverConfig.message['billme'] ? data.depositReviewBillMe : data.depositReviewCredit }}
    </div>
  </section>

  <section class="cdp__info-container">
    <div class="cdp__label">
      {{ contentString.depositAmountLabel }}:
      <span class="cdp__value">{{
        popoverConfig.message['amount'] | transactionUnits: popoverConfig.message['selectedAccount'].accountType
      }}</span>
    </div>
    <ng-container *ngIf="popoverConfig.message['fee']">
      <div class="cdp__label">
        {{ contentString.convenienceFeeLabel }}:
        <span class="cdp__value">{{
          popoverConfig.message['fee'] | transactionUnits: popoverConfig.message['selectedAccount'].accountType
        }}</span>
      </div>
      <div class="cdp__label">
        {{ contentString.totalPaymentLabel }}:
        <span class="cdp__value">
          {{
            +popoverConfig.message['amount'] + +popoverConfig.message['fee']
              | transactionUnits: popoverConfig.message['selectedAccount'].accountType
          }}
        </span>
      </div>
    </ng-container>
    <div class="cdp__label">
      {{ contentString.accountLabel }}:
      <span class="cdp__value">{{ popoverConfig.message['selectedAccount'].accountDisplayName }}</span>
    </div>
    <div class="cdp__label">
      {{ contentString.paymentMethodLabel }}:
      <span
        class="cdp__value"
        *ngIf="popoverConfig.message['sourceAcc'].accountTender === 'Apple Pay'; else creditcard"
      >
        {{ popoverConfig.message['sourceAcc'].accountTender }}
      </span>
      <ng-template #creditcard>
        <span class="cdp__value" *ngIf="!popoverConfig.message['billme']; else billme">
          {{ popoverConfig.message['sourceAcc'].accountTender | creditCardType }} {{ contentString.endingInLabel }}
          {{ popoverConfig.message['sourceAcc'].lastFour }}
        </span>
      </ng-template>
    </div>
  </section>
</st-popover-layout>

<ng-template #billme>
  <span class="cdp__value" *ngIf="data['billme']"> {{ contentString.billMeLabel }} </span>
</ng-template>
