<st-header
  title="Change Password"
  [isTitleShow]="true"
  [backButtonIcon]="'ios-close'"
  [backButtonTitle]="''"
  [isToolbarShow]="true"
  [isBackButtonShow]="false"
  [isDismissButtonShow]="true"
  (onDismiss)="close()"
></st-header>
<ion-content class="container">
  <div>
    <form [formGroup]="changePasswordForm">
      <div class="form ion-padding ion-margin-top ion-margin-bottom">
        <st-input-floating-label
          aria-describedby="currentPasswordMsg"
          class="form__control"
          [control]="currentPassword"
          label="Current Password"
          type="password"
          inputmode="text"
          idd="currentPassword"
          [formControlName]="controlsNames.currentPassword"
          [isError]="currentPassword.errors && (currentPassword.dirty || currentPassword.touched)"
          tabindex="0"
        >
        </st-input-floating-label>
        <div id="currentPasswordMsg" aria-live="assertive">
          {{ currentPassword.errors?.errorMsg }}
        </div>
      </div>
      <div class="form ion-padding ion-margin-top">
        <st-input-floating-label
          aria-describedby="newPasswordMsg"
          class="form__control"
          [control]="newPassword"
          label="Password"
          type="password"
          inputmode="text"
          idd="newPassword"
          [formControlName]="controlsNames.newPassword"
          [isError]="newPassword.errors && (newPassword.dirty || newPassword.touched)"
          tabindex="1"
        >
        </st-input-floating-label>
        <div class="ion-padding-top ion-padding-bottom middle" tabindex="0">
          <img
            class="item__icon"
            src="../../../assets/icon/{{
              newPassword.errors?.required || newPassword.errors?.min ? 'invalid' : 'valid'
            }}.svg"
          />
          <ion-label class="item__label">Pasword must contain at least 8 letters</ion-label>
        </div>
        <div class="ion-padding-bottom middle" tabindex="0">
          <img
            class="item__icon"
            src="../../../assets/icon/{{
              newPassword.errors?.required || newPassword.errors?.pattern ? 'invalid' : 'valid'
            }}.svg"
          />
          <ion-label class="item__label">Pasword must contain one letter</ion-label>
        </div>
        <div class="ion-padding-bottom middle" tabindex="0">
          <img
            class="item__icon"
            src="../../../assets/icon/{{ newPassword.errors?.required ? 'invalid' : 'valid' }}.svg"
          />
          <ion-label class="item__label">Pasword must contain one number</ion-label>
        </div>
      </div>
    </form>
  </div>
</ion-content>
<ion-footer class="ion-padding footer">
  <st-button
    buttonModifier="rectangle"
    [disabled]="!changePasswordForm?.valid || isLoading"
    (onClick)="changePassword()"
    tabindex="3"
  >
    {{ isLoading ? 'Saving...' : 'Change password' }}
  </st-button>
</ion-footer>
